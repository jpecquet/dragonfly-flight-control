# Simulation config: Trajectory tracking - Circle
# Tests controller tracking a circular path in the XZ plane (vertical circle)

# Kinematic parameters (baseline values)
omega = 25.1327412287       # 8*pi (wing beat frequency)
gamma_mean = 1.5707963268   # pi/2 (stroke plane angle, 90 deg)
phi_amp = 0.3926990817      # pi/8 (stroke amplitude)
psi_mean = 0.7853981634     # pi/4 (mean pitch angle, 45 deg)
psi_amp = 0.2543718         # pitch amplitude
psi_phase = 1.5707963268    # pi/2 (pitch phase offset)

# Initial conditions (start at circle edge)
x0 = 0.3
y0 = 0.0
z0 = 1.0

ux0 = 0.0
uy0 = 0.0
uz0 = 0.0

# Time integration
n_wingbeats = 20
steps_per_wingbeat = 50

# Output
output = track_circle.h5

# Trajectory: circle at z=1.0, radius=0.3, slow angular velocity
# Format: circle center_x center_y center_z radius omega
trajectory = circle 0.0 0.0 1.0 1 0.5

# PID gains (x axis)
pid_x_kp = 3.0
pid_x_ki = 0.8
pid_x_kd = 1.0
pid_x_imax = 1.5

# PID gains (y axis)
pid_y_kp = 3.0
pid_y_ki = 0.8
pid_y_kd = 1.0
pid_y_imax = 1.5

# PID gains (z axis)
pid_z_kp = 4.0
pid_z_ki = 1.0
pid_z_kd = 1.2
pid_z_imax = 2.0

# Parameter bounds
gamma_mean_min = 0.5
gamma_mean_max = 2.5
psi_mean_min = 0.0
psi_mean_max = 1.5708
phi_amp_min = 0.1
phi_amp_max = 0.8

# Wing definitions
[[wing]]
name = fore
side = left
mu0 = 0.075
lb0 = 0.75
Cd0 = 0.4
Cl0 = 1.2
phase = 0.0

[[wing]]
name = fore
side = right
mu0 = 0.075
lb0 = 0.75
Cd0 = 0.4
Cl0 = 1.2
phase = 0.0

[[wing]]
name = hind
side = left
mu0 = 0.075
lb0 = 0.75
Cd0 = 0.4
Cl0 = 1.2
phase = 3.1415926536

[[wing]]
name = hind
side = right
mu0 = 0.075
lb0 = 0.75
Cd0 = 0.4
Cl0 = 1.2
phase = 3.1415926536
