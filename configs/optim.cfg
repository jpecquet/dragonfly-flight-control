# Optimization config: Find equilibrium flight conditions
#
# Parameters can be fixed or variable:
#   - Fixed:    param = <value>
#   - Variable: param = variable
#               param_min = <lower_bound>
#               param_max = <upper_bound>
#
# All angles in radians

# Wing beat frequency (fixed)
omega = 25.1327412287       # 8*pi

# Kinematic parameters
# gamma_mean - stroke plane angle (fixed at 90 degrees for this study)
gamma_mean = 1.5707963268
gamma_cos = 0.0
gamma_sin = 0.0

# phi_cos - first harmonic stroke coefficient (fixed)
phi_mean = 0.0
phi_cos = 0.3926990817      # pi/8
phi_sin = 0.0

# psi_mean - mean pitch angle (variable)
psi_mean = variable
psi_mean_min = 0.0
psi_mean_max = 1.5707963268   # pi/2

# psi first-harmonic coefficients
psi_cos = 0.0
psi_sin = variable
psi_sin_min = -1.5707963268   # -pi/2
psi_sin_max = 1.5707963268    # pi/2

# Velocity range for continuation
ux_min = 0.0
ux_max = 10.0
n_velocity = 101

# Optimization algorithm selection
# Options: cobyla (default), direct, mlsl, crs2, multistart
# - cobyla: Grid search + COBYLA local optimizer
# - direct: DIRECT global optimizer (dividing rectangles)
# - mlsl: Multi-level single-linkage global optimizer
# - crs2: Controlled random search global optimizer
# - multistart: Sobol quasi-random sampling + local optimization
algorithm = cobyla

# Grid search resolution for COBYLA (5^n starting points)
n_grid = 5

# Number of Sobol samples for multistart/global algorithms
n_samples = 100

# Maximum evaluations per local optimization
max_eval = 200

# Threshold for equilibrium detection (acceleration magnitude)
equilibrium_tol = 1e-6

# Landscape visualization (generates HDF5 for plotting)
map_landscape = false
map_resolution = 50

# Output base name (will produce optim_branch1.txt, optim_branch2.txt, etc.)
output = optim.txt

# Wing definitions
[[wing]]
name = fore
side = left
mu0 = 0.075
lb0 = 0.75
Cd0 = 0.4
Cl0 = 1.2
phase = 0.0

[[wing]]
name = fore
side = right
mu0 = 0.075
lb0 = 0.75
Cd0 = 0.4
Cl0 = 1.2
phase = 0.0

[[wing]]
name = hind
side = left
mu0 = 0.075
lb0 = 0.75
Cd0 = 0.4
Cl0 = 1.2
phase = 3.1415926536

[[wing]]
name = hind
side = right
mu0 = 0.075
lb0 = 0.75
Cd0 = 0.4
Cl0 = 1.2
phase = 3.1415926536
